const $logobutton=document.querySelector("#logobutton"),$header_container=document.querySelector("#header_container"),$navbar_list=document.querySelector("#navbar_list"),$navbar_buton=document.querySelector("#navbar_buton"),$logo=document.querySelector("#logo"),$switchThemeBtn=document.querySelector("#switchTheme"),$crearGifBtn=document.querySelector("#crateGifBtn"),$favoritosMenu=document.querySelector("#FavoritosMenu"),$heroSection=document.querySelector("#heroSection"),$misGifosMenu=document.querySelector("#misGifosMenu"),$crearGifosMenu=document.querySelector("#crearGifosMenu"),$searchContainer=document.querySelector("#search__container"),$searchresultsContainer=document.querySelector("#searchresults"),$errorContainer=document.querySelector("#error-container"),$searchresultsGallery=document.querySelector("#searchresults_gallery"),$searchTitle=document.querySelector("#searchresults__title"),$verMasbtn=document.querySelector("#verMas-btn"),$navbarSearchGrayBtn=document.querySelector("#navbarSearch-gray-btn"),$navbarSearchContainer=document.querySelector("#navbarSearch__container"),$navbarSearchInput=document.querySelector("#navbarSearch__input"),$navbarSearchBtn=document.querySelector("#navbarSearch__icon"),$navbarSearchCloseBtn=document.querySelector("#navbarSearch-close-icon"),$searchGrayBtn=document.querySelector("#search-gray-btn"),$searchInputHero=document.querySelector("#searchInput"),$searchBtn=document.querySelector("#search-icon"),$searchCloseBtn=document.querySelector("#search-close-icon"),$searchSuggestionsContainer=document.querySelector("#searchSuggestions__container"),$searchSuggestionList=document.querySelector("#search-sugestion-list"),$trendingTagList=document.querySelector("#trendingTag_list"),$trendingSection=document.querySelector("#trendingSection"),$previousBtn=document.querySelector("#previous-btn"),$nextBtn=document.querySelector("#next-btn"),$trendingSlider=document.querySelector("#trending__slider"),$gifContainer=document.querySelectorAll(".gif__container"),$gifAcctions=document.querySelectorAll(".gifActions"),$maximizedGifSection=document.querySelector("#maximizedGif"),$maxCloseBtn=document.querySelector("close-btn"),$favSection=document.querySelector("#favorites-section"),$favContainer=document.querySelector("#fav-container"),$noFavsContainer=document.querySelector("#noFavs_container"),$misGifosSection=document.querySelector("#misGifosSection"),$misGifosContainer=document.querySelector("#misGifos-container"),$noGifContainer=document.querySelector("#noGif_container"),$createGifSection=document.querySelector("#createGifSection"),$crearGifTitle=document.querySelector("#crearGif_title"),$crearGifText=document.querySelector("#crearGif_text"),$step1=document.querySelector("#step-1"),$step2=document.querySelector("#step-2"),$step3=document.querySelector("#step-3"),$buttonComenzar=document.querySelector("#button--comenzar"),$buttonGrabar=document.querySelector("#button--grabar"),$buttonFinalizar=document.querySelector("#button--finalizar"),$buttonSubirGif=document.querySelector("#button--subirGif"),$timer=document.querySelector("#timer-recording"),$repeatBtn=document.querySelector("#repeatShot"),$overlay=document.querySelector("#overlay"),$overlayStatusIcon=document.querySelector("#overlay_status-icon"),$overlayStatusText=document.querySelector("#overlay_status-text"),$video=document.querySelector("#recording_video"),$recordedGifo=document.querySelector("#recorded_gifo"),$camera=document.querySelector("#camera"),$celuloide=document.querySelector("#celuloide"),switchTheme=()=>{document.body.classList.toggle("darkmode"),document.body.classList.contains("darkmode")?localStorage.setItem("dark-mode",!0):localStorage.setItem("dark-mode",!1)};$switchThemeBtn.addEventListener("click",switchTheme);const setLocalStorageTheme=()=>{"true"==localStorage.getItem("dark-mode")?(document.body.classList.add("darkmode"),$switchThemeBtn.textContent="Modo Diurno",$logo.src="assets/logo-mobile-modo-noct.svg",$crearGifBtn.src="assets/CTA-crar-gifo-modo-noc.svg",$navbar_buton.src="assets/burger-modo-noct.svg",$navbarSearchBtn.src="assets/icon-search-mod-noc.svg",$navbarSearchCloseBtn.src="assets/close-modo-noct.svg",$searchBtn.src="assets/icon-search-mod-noc.svg",$searchCloseBtn.src="assets/close-modo-noct.svg",$previousBtn.src="assets/button-slider-left-md-noct.svg",$nextBtn.src="assets/button-slider-right-md-noct.svg",$camera.src="assets/camara-modo-noc.svg",$celuloide.src="assets/pelicula-modo-noc.svg"):(document.body.classList.remove("darkmode"),$switchThemeBtn.textContent="Modo Nocturno")};"true"==localStorage.getItem("dark-mode")?(document.body.classList.add("darkmode"),$switchThemeBtn.textContent="Modo Diurno",$logo.src="assets/logo-mobile-modo-noct.svg",$crearGifBtn.src="assets/CTA-crar-gifo-modo-noc.svg",$navbar_buton.src="assets/burger-modo-noct.svg",$navbarSearchBtn.src="assets/icon-search-mod-noc.svg",$navbarSearchCloseBtn.src="assets/close-modo-noct.svg",$searchBtn.src="assets/icon-search-mod-noc.svg",$searchCloseBtn.src="assets/close-modo-noct.svg",$previousBtn.src="assets/button-slider-left-md-noct.svg",$nextBtn.src="assets/button-slider-right-md-noct.svg",$camera.src="assets/camara-modo-noc.svg",$celuloide.src="assets/pelicula-modo-noc.svg"):(document.body.classList.remove("darkmode"),$switchThemeBtn.textContent="Modo Nocturno");const displaynavbar_buton=()=>{"true"===localStorage.getItem("dark-mode")?$navbar_list.classList.contains("hiddenMenu")?($navbar_list.classList.remove("hiddenMenu"),$navbar_buton.src="assets/close-modo-noct.svg"):($navbar_list.classList.add("hiddenMenu"),$navbar_buton.src="assets/burger-modo-noct.svg"):$navbar_list.classList.contains("hiddenMenu")?($navbar_list.classList.remove("hiddenMenu"),$navbar_buton.src="assets/close.svg"):($navbar_list.classList.add("hiddenMenu"),$navbar_buton.src="assets/burger.svg")};function stickyNav(){document.documentElement.scrollTop>600?window.innerWidth<1024?$navbarSearchContainer.classList.add("hiddenSearchBar"):($navbarSearchContainer.classList.remove("hiddenSearchBar"),$header_container.style.boxShadow="0 9px 8px -10px rgba(148,147,147,0.9)"):($navbarSearchContainer.classList.add("hiddenSearchBar"),$header_container.style.boxShadow="none")}$navbar_buton.addEventListener("click",displaynavbar_buton),$favoritosMenu.addEventListener("click",displaynavbar_buton),$crearGifBtn.addEventListener("click",()=>{$crearGifBtn.src="assets/CTA-crear-gifo-active.svg"}),$crearGifBtn.addEventListener("mouseover",()=>{$crearGifBtn.src="assets/CTA-crear-gifo-hover.svg"}),$crearGifBtn.addEventListener("mouseout",()=>{$crearGifBtn.src="assets/button-crear-gifo.svg"}),window.addEventListener("scroll",stickyNav);const displayCreateGifSection=e=>{e.preventDefault(),$createGifSection.classList.remove("hidden"),$heroSection.classList.add("hidden"),$favSection.classList.add("hidden"),$trendingSection.classList.add("hidden"),$misGifosSection.classList.add("hidden"),window.scrollTo({top:0,behavior:"smooth"})},displayMainSection=e=>{e.preventDefault(),$heroSection.classList.remove("hidden"),$misGifosSection.classList.add("hidden"),$favSection.classList.add("hidden"),$createGifSection.classList.add("hidden"),$trendingSection.classList.remove("hidden"),window.scrollTo({top:0,behavior:"smooth"})};$crearGifosMenu.addEventListener("click",displayCreateGifSection),$logobutton.addEventListener("click",displayMainSection);const apiKey="OtUF28A8rixE8ruAKmDI9jRbMJFdBKGn",searchEndpoint="https://api.giphy.com/v1/gifs/search",trendingEndpoint="https://api.giphy.com/v1/gifs/trending",trendingTagsEndpoint="https://api.giphy.com/v1/trending/searches",searchAutocomplete="https://api.giphy.com/v1/gifs/search/tags",uploadGifEndpoint="https://upload.giphy.com/v1/gifs",getGifByIdEndpoint="https://api.giphy.com/v1/gifs";let arrFavoriteGifs=[];const addToFav=(e,t,a)=>{let i={username:t,title:a,gif:e};arrFavoriteGifs.push(i),localStorage.setItem("FavoriteGifs",JSON.stringify(arrFavoriteGifs)),displayFavoriteGifs()},displayFavoriteSection=e=>{e.preventDefault(),$heroSection.classList.add("hidden"),$misGifosSection.classList.add("hidden"),$createGifSection.classList.add("hidden"),$favSection.classList.remove("hidden"),window.scrollTo({top:0,behavior:"smooth"}),displayFavoriteGifs(),0==arrFavoriteGifs||null==arrFavoriteGifs?($noFavsContainer.classList.remove("hidden"),$favContainer.classList.add("hidden")):($noFavsContainer.classList.add("hidden"),$favContainer.classList.remove("hidden"))},displayFavoriteGifs=()=>{if($favContainer.innerHTML="",null==(arrFavoriteGifs=JSON.parse(localStorage.getItem("FavoriteGifs"))))arrFavoriteGifs=[];else for(let e=0;e<arrFavoriteGifs.length;e++){const t=document.createElement("div");t.classList.add("gif__container"),t.innerHTML=` \n\t\t\t<img class="gif" onclick="maximizeFavoriteGif('${arrFavoriteGifs[e].gif}','${arrFavoriteGifs[e].username}','${arrFavoriteGifs[e].title}')" src="${arrFavoriteGifs[e].gif}" alt="${arrFavoriteGifs[e].title}">\n\t\t\t<div class="gifActions">\n\t\t\t\t<div class="gifActions__btn">\n\t\t\t\t\t<div class="btn remove" onclick="removeGif('${arrFavoriteGifs[e].gif}')"></div>\n\t\t\t\t\t<div class="btn download" onclick="downloadGif('${arrFavoriteGifs[e].gif}','${arrFavoriteGifs[e].title}')"></div>\n\t\t\t\t\t<div class="btn maximize" onclick="maximizeFavoriteGif('${arrFavoriteGifs[e].gif}','${arrFavoriteGifs[e].username}','${arrFavoriteGifs[e].title}')"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="gif__info">\n\t\t\t\t\t<p class="gif_user">${arrFavoriteGifs[e].username}</p>\n\t\t\t\t\t<p class="gif_title">${arrFavoriteGifs[e].title}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t`,$favContainer.appendChild(t)}};$favoritosMenu.addEventListener("click",displayFavoriteSection);const displayMisGifosSection=e=>{e.preventDefault(),$misGifosSection.classList.remove("hidden"),$heroSection.classList.add("hidden"),$favSection.classList.add("hidden"),$createGifSection.classList.add("hidden"),$trendingSection.classList.remove("hidden"),window.scrollTo({top:0,behavior:"smooth"}),displayMiGifos(),0==arrMyGifos||null==arrMyGifos?($noGifContainer.classList.remove("hidden"),$misGifosContainer.classList.add("hidden")):($noGifContainer.classList.add("hidden"),$misGifosContainer.classList.remove("hidden"))};$misGifosMenu.addEventListener("click",displayMisGifosSection);const displayMiGifos=()=>{if($misGifosContainer.innerHTML="",arrMyGifos=JSON.parse(localStorage.getItem("MyGifs")),console.log(arrMyGifos),null==arrMyGifos)arrMyGifos=[];else for(let e=0;e<arrMyGifos.length;e++)fetch(`${getGifByIdEndpoint}?ids=${arrMyGifos[e]}&api_key=${apiKey}`).then(e=>e.json()).then(e=>{console.log(e),console.log(typeof e.data[0].id);const t=document.createElement("div");t.classList.add("gif__container"),t.innerHTML=`\n\t\t\t\t\t<img class="gif" src="${e.data[0].images.original.url}" alt="Gif Creado por el usuario">\n\n\t\t\t\t\t<div class="gifActions">\n\t\t\t\t\t\t<div class="gifActions__btn">\n\t\t\t\t\t\t\t<div class="btn remove" onclick="removeMyGifos('${e.data[0].id}')"></div>\n\t\t\t\t\t\t\t<div class="btn download" onclick="downloadGif('${e.data[0].images.original.url}','Gif')"></div>\n\t\t\t\t\t\t\t<div class="btn maximize" onclick="maximizeFavoriteGif('${e.data[0].images.original.url}','User','Gif')"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="gif__info">\n\t\t\t\t\t\t\t<p class="gif_user">User</p>\n\t\t\t\t\t\t\t<p class="gif_title">Gif</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t`,$misGifosContainer.appendChild(t)}).catch(e=>{console.error(e)})},downloadGif=async(e,t)=>{let a=await fetch(e).then(e=>e.blob());invokeSaveAsDialog(a,t+".gif")},maximizeGif=(e,t,a)=>{$maximizedGifSection.classList.remove("hidden"),$maximizedGifSection.classList.add("maximizedGif"),$maximizedGifSection.innerHTML="";const i=document.createElement("div");i.classList.add("maximizedGif__container"),i.innerHTML=`\n\t<div class="close-btn" id="close-max-btn" onclick="closeMaximized()"></div>\n\t<div class="maxGif_Container">\n\t\t<img class="gifMax" src="${e}" alt="${a}">\n\t</div>\n\t<div class="gifMaxActions">\n\t\t<div class="gif__info">\n\t\t\t<p class="gif_user">${t}</p>\n\t\t\t<p class="gif_title">${a}</p>\n\t\t</div>\n\t\t<div class="gifMaxActions__btn">\n\t\t\t<div class="buttonsMax favoriteMax" onclick="addToFav('${e}', '${t}', '${a}')"></div>\n\t\t\t<div class="buttonsMax downloadMax" onclick="downloadGif('${e}','${a}')"></div>\n\t\t\t</div>\n\t</div>`,$maximizedGifSection.appendChild(i)},maximizeFavoriteGif=(e,t,a)=>{$maximizedGifSection.classList.remove("hidden"),$maximizedGifSection.classList.add("maximizedGif"),$maximizedGifSection.innerHTML="";const i=document.createElement("div");i.classList.add("maximizedGif__container"),i.innerHTML=`\n\t<div class="close-btn" id="close-max-btn" onclick="closeMaximized()"></div>\n\t<div class="maxGif_Container">\n\t\t<img class="gifMax" src="${e}" alt="${a}">\n\t</div>\n\t<div class="gifMaxActions">\n\t\t<div class="gif__info">\n\t\t\t<p class="gif_user">${t}</p>\n\t\t\t<p class="gif_title">${a}</p>\n\t\t</div>\n\t\t<div class="gifMaxActions__btn">\n\t\t\t<div class="buttonsMax removeMax" onclick="removeGif('${e}')"></div>\n\t\t\t<div class="buttonsMax downloadMax" onclick="downloadGif('${e}','${a}')"></div>\n\t\t\t</div>\n\t</div>`,$maximizedGifSection.appendChild(i)},closeMaximized=()=>{$maximizedGifSection.classList.add("hidden"),$maximizedGifSection.classList.remove("maximizedGif")},removeGif=e=>{let t=JSON.parse(localStorage.getItem("FavoriteGifs"));console.log(t);for(let a=0;a<t.length;a++)t[a].gif===e&&(t.splice(a,1),localStorage.setItem("FavoriteGifs",JSON.stringify(t)),displayFavoriteSection(event),closeMaximized())},removeMyGifos=e=>{event.preventDefault();let t=JSON.parse(localStorage.getItem("MyGifs"));console.log(t);for(let a=0;a<t.length;a++)t[a]==e&&(t.splice(a,1),localStorage.setItem("MyGifs",JSON.stringify(t)),displayMisGifosSection(event),closeMaximized())};let offsetSearch=0;const getSearch=async e=>{event.preventDefault(),cleanSearchSuggestions(),$searchInputHero.value=e,$navbarSearchInput.value=e,$searchTitle.innerHTML=e,0===offsetSearch&&($searchresultsGallery.innerHTML=""),await fetch(`${searchEndpoint}?api_key=${apiKey}&q=${e}&offset=${offsetSearch}&limit=12&rating=g`).then(e=>e.json()).then(e=>{0==e.data?displayErrorSearch():displaySearchGif(e)}).catch(e=>console.log(e))},displaySearchGif=e=>{$searchresultsContainer.classList.remove("hidden"),$verMasbtn.classList.remove("hidden"),0===offsetSearch&&window.scrollTo({top:600,behavior:"smooth"}),e.data.length<12&&($verMasbtn.style.display="none");for(let t=0;t<e.data.length;t++){const a=document.createElement("div");a.classList.add("gif__container"),a.innerHTML=` \n\t\t<img class="gif" onclick="maximizeGif('${e.data[t].images.original.url}','${e.data[t].username}','${e.data[t].title}')" src="${e.data[t].images.original.url}" alt="${e.data[t].title}">\n\t\n\t\t<div class="gifActions">\n\t\t\t<div class="gifActions__btn">\n\t\t\t\t<div class="btn favorite" onclick="addToFav('${e.data[t].images.original.url}','${e.data[t].username}','${e.data[t].title}')"></div>\n\t\t\t\t<div class="btn download" onclick="downloadGif('${e.data[t].images.original.url}','${e.data[t].title}')"></div>\n\t\t\t\t<div class="btn maximize" onclick="maximizeGif('${e.data[t].images.original.url}','${e.data[t].username}','${e.data[t].title}')"></div>\n\t\t\t</div>\n\t\t\t<div class="gif__info">\n\t\t\t\t<p class="gif_user">${e.data[t].username}</p>\n\t\t\t\t<p class="gif_title">${e.data[t].title}</p>\n\t\t\t</div>\n\t\t</div>\n\t\t`,$searchresultsGallery.appendChild(a)}},displayErrorSearch=()=>{$searchresultsContainer.classList.remove("hidden"),$errorContainer.classList.remove("hidden"),$errorContainer.innerHTML='\n\t<div class="error__container" id="error-container">\n\t<img class="" id="error-search" src="assets/icon-busqueda-sin-resultado.svg" alt="Busqueda sin resultado" >\n\t<h4 class="error-search-text">Intenta con otra búsqueda.</h4>\n\t</div>\n\t',$verMasbtn.style.display="none"},verMasButton=()=>{offsetSearch+=12,$searchInputHero.value?getSearch($searchInputHero.value):getSearch($navbarSearchInput.value)},getSearchSuggestions=async()=>{cleanSearchSuggestions(),$searchSuggestionList.classList.remove("hidden");const e=$searchInputHero.value;e.length>=1&&await fetch(`${searchAutocomplete}?api_key=${apiKey}&q=${e}&limit=4&rating=g`).then(e=>e.json()).then(e=>{displaySuggestions(e)}).catch(e=>{console.log(e)})},displaySuggestions=e=>{for(let t=0;t<e.data.length;t++){const a=document.createElement("li");a.classList.add("SearchSuggestions__item"),a.innerHTML=`\n\t\t<img class="search__btnGray" id="" src="assets/icon-search-gray.svg" alt="Boton Buscar" onclick="getSearch('${e.data[t].name}')">\n\t\t<p class="search__Text" onclick="getSearch('${e.data[t].name}')">${e.data[t].name}</p>`,$searchSuggestionList.appendChild(a)}},cleanResultsContianer=()=>{$searchresultsContainer.classList.add("hidden"),$errorContainer.classList.add("hidden"),$verMasbtn.style.display="block",$searchresultsGallery.innerHTML="",$navbarSearchInput.placeholder="Busca GIFOS y más",$searchInputHero.placeholder="Busca GIFOS y más"},cleanSearchSuggestions=()=>{$searchSuggestionList.classList.add("hidden"),$searchSuggestionList.innerHTML=""},setActiveSearchBar=()=>{$searchGrayBtn.classList.remove("hidden"),$searchCloseBtn.classList.remove("hidden"),$searchBtn.classList.add("hidden"),$searchSuggestionsContainer.classList.remove("hidden"),$searchContainer.classList.add("searchActive"),$searchSuggestionsContainer.classList.add("searchActiveContainer")},setActiveNavbarSearch=()=>{$navbarSearchGrayBtn.classList.remove("hidden"),$navbarSearchCloseBtn.classList.remove("hidden"),$navbarSearchBtn.classList.add("hidden")},setInactiveSearchBar=()=>{$navbarSearchInput.value="",$searchInputHero.value="",cleanResultsContianer(),cleanSearchSuggestions(),$searchSuggestionsContainer.classList.add("hidden"),$searchBtn.classList.remove("hidden"),$searchCloseBtn.classList.add("hidden"),$searchGrayBtn.classList.add("hidden"),$searchContainer.classList.remove("searchActive")},setInactiveNavbarSearch=()=>{$navbarSearchInput.value="",$searchInputHero.value="",cleanResultsContianer(),$navbarSearchBtn.classList.remove("hidden"),$navbarSearchCloseBtn.classList.add("hidden"),$navbarSearchGrayBtn.classList.add("hidden")};$searchGrayBtn.addEventListener("click",()=>{getSearch($searchInputHero.value)}),$searchInputHero.addEventListener("keypress",e=>{13===e.keyCode&&getSearch($searchInputHero.value)}),$searchInputHero.addEventListener("click",setActiveSearchBar),$searchInputHero.addEventListener("input",setActiveSearchBar),$searchInputHero.addEventListener("input",getSearchSuggestions),$searchInputHero.addEventListener("input",cleanResultsContianer),$searchCloseBtn.addEventListener("click",setInactiveSearchBar),$verMasbtn.addEventListener("click",verMasButton),$navbarSearchGrayBtn.addEventListener("click",()=>{getSearch($navbarSearchInput.value)}),$navbarSearchInput.addEventListener("keypress",e=>{13===e.keyCode&&getSearch($navbarSearchInput.value)}),$navbarSearchInput.addEventListener("click",setActiveNavbarSearch),$navbarSearchInput.addEventListener("input",setActiveNavbarSearch),$navbarSearchCloseBtn.addEventListener("click",setInactiveNavbarSearch),$navbarSearchInput.addEventListener("input",cleanResultsContianer);const setTrendingBtn=()=>{"true"===localStorage.getItem("dark-mode")?($previousBtn.src="assets/button-slider-left-md-noct.svg",$nextBtn.src="assets/button-slider-right-md-noct.svg"):($previousBtn.src="assets/button-slider-left.svg",$nextBtn.src="assets/Button-Slider-right.svg")};$previousBtn.addEventListener("mouseover",()=>{$previousBtn.src="assets/button-slider-left-hover.svg"}),$nextBtn.addEventListener("mouseover",()=>{$nextBtn.src="assets/Button-Slider-right-hover.svg"}),$previousBtn.addEventListener("mouseout",setTrendingBtn),$nextBtn.addEventListener("mouseout",setTrendingBtn);const getTrendingTags=async()=>{await fetch(`${trendingTagsEndpoint}?api_key=${apiKey}`).then(e=>e.json()).then(e=>{console.log(e),displayTrendingTags(e)}).catch(e=>console.log(e))};getTrendingTags();const displayTrendingTags=e=>{for(let t=0;t<6;t++){const a=document.createElement("span");a.classList.add("trending__item"),a.setAttribute("onclick",`getSearch("${e.data[t]}")`),a.innerHTML=`${e.data[t]}`,$trendingTagList.appendChild(a)}},getTrendingGif=async()=>{await fetch(`${trendingEndpoint}?api_key=${apiKey}&limit=6&rating=g`).then(e=>e.json()).then(e=>{console.log(e),displayTrendingGifs(e)}).catch(e=>console.error(e))};getTrendingGif();const displayTrendingGifs=e=>{for(let t=0;t<e.data.length;t++){const a=document.createElement("div");a.classList.add("gif__container"),a.innerHTML=` \n\t\t<img class="gif" onclick="maximizeGif('${e.data[t].images.original.url}','${e.data[t].username}','${e.data[t].title}')" src="${e.data[t].images.original.url}" alt="${e.data[t].title}">\n\t\n\t\t<div class="gifActions">\n\t\t\t<div class="gifActions__btn">\n\t\t\t\t<div class="btn favorite" onclick="addToFav('${e.data[t].images.original.url}','${e.data[t].username}','${e.data[t].title}')"></div>\n\t\t\t\t<div class="btn download" onclick="downloadGif('${e.data[t].images.original.url}','${e.data[t].title}')"></div>\n\t\t\t\t<div class="btn maximize" onclick="maximizeGif('${e.data[t].images.original.url}','${e.data[t].username}','${e.data[t].title}')"></div>\n\t\t\t</div>\n\t\t\t<div class="gif__info">\n\t\t\t\t<p class="gif_user">${e.data[t].username}</p>\n\t\t\t\t<p class="gif_title">${e.data[t].title}</p>\n\t\t\t</div>\n\t\t</div>\n\t\t`,$trendingSlider.appendChild(a)}},nextSliderBtn=()=>{$trendingSlider.scrollLeft+=400},prevSliderBtn=()=>{$trendingSlider.scrollLeft-=400};let recorder,blob;$nextBtn.addEventListener("click",nextSliderBtn),$previousBtn.addEventListener("click",prevSliderBtn),$buttonGrabar.style.display="none",$buttonFinalizar.style.display="none",$buttonSubirGif.style.display="none",$overlay.style.display="none";let timer,form=new FormData,arrMyGifos=[],hours="00",minutes="00",seconds="00";const getStreamAndRecord=async()=>{$crearGifTitle.innerHTML="¿Nos das acceso <br> a tu cámara?",$crearGifText.innerHTML="El acceso a tu camara será válido sólo <br> por el tiempo en el que estés creando el GIFO.",$buttonComenzar.style.visibility="hidden",$step1.classList.add("step-active"),await navigator.mediaDevices.getUserMedia({audio:!1,video:{height:{max:480}}}).then(e=>{$crearGifTitle.classList.add("hidden"),$crearGifText.classList.add("hidden"),$step1.classList.remove("step-active"),$step2.classList.add("step-active"),$buttonComenzar.style.display="none",$buttonGrabar.style.display="block",$video.classList.remove("hidden"),$video.srcObject=e,$video.play(),recorder=RecordRTC(e,{type:"gif",frameRate:1,quality:10,width:360,hidden:240,onGifRecordingStarted:function(){console.log("started")}})}).catch(e=>console.log(e))};$buttonComenzar.addEventListener("click",getStreamAndRecord);const createGifo=()=>{console.log("está grabando"),$buttonGrabar.style.display="none",$buttonFinalizar.style.display="block",$timer.classList.remove("hidden"),$repeatBtn.classList.add("hidden"),recorder.startRecording(),timer=setInterval(timerActive,1e3)};$buttonGrabar.addEventListener("click",createGifo);const stopCreatingGif=()=>{$video.classList.add("hidden"),$recordedGifo.classList.remove("hidden"),recorder.stopRecording(()=>{blob=recorder.getBlob(),$recordedGifo.src=URL.createObjectURL(blob),form.append("file",recorder.getBlob(),"myGif.gif"),console.log(form.get("file"))}),$buttonFinalizar.style.display="none",$buttonSubirGif.style.display="block",$timer.classList.add("hidden"),$repeatBtn.classList.remove("hidden"),clearInterval(timer),hours="00",minutes="00",seconds="00",$timer.innerText=`${hours}:${minutes}:${seconds}`};$buttonFinalizar.addEventListener("click",stopCreatingGif);const uploeadCreatedGif=async()=>{$overlay.style.display="flex",$step2.classList.remove("step-active"),$step3.classList.add("step-active"),$repeatBtn.classList.add("hidden"),$buttonSubirGif.style.visibility="hidden",await fetch(`${uploadGifEndpoint}?api_key=${apiKey}`,{method:"POST",body:form}).then(e=>e.json()).then(e=>{let t=e.data.id;console.log(e.data.id),$overlayStatusIcon.src="assets/check.svg",$overlayStatusText.innerHTML="GIFO subido con éxito";let a=document.createElement("div");a.classList.add("overlay__buttons"),a.innerHTML=`<div class="btns downloadOverlay" onclick="downloadCreatedGif('${t}')"></div> \n\t\t\t<div class="btns linkOverlay" onclick="displayMisGifosSection(event)"></div>`,$overlay.appendChild(a),arrMyGifos.push(t),console.log(arrMyGifos),myGifos=localStorage.setItem("MyGifs",JSON.stringify(arrMyGifos))}).catch(e=>{console.error(e)})};$buttonSubirGif.addEventListener("click",uploeadCreatedGif);const repeatRecordingGif=e=>{e.preventDefault(),recorder.clearRecordedData(),$step2.classList.add("step-active"),$repeatBtn.classList.add("hidden"),$buttonGrabar.style.display="block",$buttonSubirGif.style.display="none",$video.classList.remove("hidden"),$recordedGifo.classList.add("hidden"),navigator.mediaDevices.getUserMedia({audio:!1,video:{height:{max:480}}}).then(e=>{$video.srcObject=e,$video.play(),recorder=RecordRTC(e,{type:"gif",frameRate:1,quality:10,width:360,hidden:240,onGifRecordingStarted:function(){console.log("started")}})}).catch(e=>console.log(e))};$repeatBtn.addEventListener("click",repeatRecordingGif);const downloadCreatedGif=async e=>{let t=await fetch(`https://media.giphy.com/media/${e}/giphy.gif`).then(e=>e.blob());invokeSaveAsDialog(t,"My-Gif.gif")};function timerActive(){++seconds<10&&(seconds="0"+seconds),seconds>59&&(seconds="00",++minutes<10&&(minutes="0"+minutes)),minutes>59&&(minutes="00",++hours<10&&(hours="0"+hours)),$timer.innerHTML=`${hours}:${minutes}:${seconds}`}